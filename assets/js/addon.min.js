"use strict";$(document).ready((function(){$(".hide-txt").hide(),$(".tax-wrap input").focus((function(){$(".hide-txt").show("slow")})),$(".tax-wrap input").blur((function(){$(this).val()?$(".hide-txt").show("slow"):$(".hide-txt").hide("slow")})),$(".input1").iconpicker(".input1"),gload("hide")}));var click=!1;function callFunction(a){click?($(".dd").nestable("collapseAll"),$("#kolapse").removeClass("btn-info"),$("#kolapse").addClass("btn-success"),$("#kolapse").html('<i class="fa fa-plus"></i> Expand'),click=!1):($("#kolapse").addClass("btn-info"),$(".dd").nestable("expandAll"),$("#kolapse").html('<i class="fa fa-minus"></i> Collapse'),click=!0)}function show_selected(){var a=document.getElementById("icon"),e=a[a.selectedIndex].value;document.getElementById("eclass").value=e,$("#showicon").addClass(e),$("#myModal").modal("hide")}$(document).ready((function(){$("#kolapse").html('<i class="fa fa-plus"></i> Expand');var a=function(a){var e=a.length?a:$(a.target),l=e.data("output");window.JSON?l.val(window.JSON.stringify(e.nestable("serialize"))):l.val("JSON browser support required for this demo.")};$("#nestable").nestable({group:1}).on("change",a),a($("#nestable").data("output",$("#nestable-output"))),$("#nestable").nestable({maxDepth:10,collapsedClass:"dd-collapsed"}).nestable("collapseAll")})),$(document).ready((function(){function a(){var a=[];$(".get_value").each((function(){$(this).is(":checked")&&a.push($(this).val())})),a=a.toString();var e={type:$("#type").val(),label:$("#label").val(),link:$("#link").val(),eclass:$("#eclass").val(),parentc:$("#parentc").val(),aktif:$("#aktif").val(),submenu:$("#submenu").val(),target:$("#target").val(),level:a,id:$("#id").val()};return $.ajax({type:"GET",url:base_url+"main/save_menu",data:e,beforeSend:function(){gload("show"),$("#submits").html("Proses...")},dataType:"json",cache:!1,success:function(a){console.log(a.aktif),"Y"==a.aktif?($("#reload_"+a.id).removeClass("text-danger"),$("#label_show"+a.id).removeClass("text-danger"),$("#link_show"+a.id).removeClass("text-danger"),$("#eclass_show"+a.id).removeClass("text-danger")):($("#reload_"+a.id).addClass("text-danger"),$("#label_show"+a.id).addClass("text-danger"),$("#link_show"+a.id).addClass("text-danger"),$("#eclass_show"+a.id).addClass("text-danger")),"add"==a.type?"ok"==a.ok?($("#menu-id").append(a.menu),$("#submits").html("Submit"),$("#accordionSidebar").load(location.href+" #accordionSidebar"),$("#reload_"+a.id).addClass("text-danger"),notif(a.msg,"info")):(notif("Data GAGAL di simpan","danger"),$("#submits").html("Submit")):"edit"==a.type&&($("#submits").html("Submit"),$("#label_show"+a.id).html(a.label),$("#link_show"+a.id).html(a.link),$("#eclass_show"+a.id).html(a.eclass),notif(a.msg,"success"),$("#showicon").removeClass(a.eclass),$("#showicon").addClass("fa-bars"),$("#accordionSidebar").load(location.href+" #accordionSidebar")),$("#label").val(""),$("#link").val(""),$("#eclass").val(""),$("#parentc").val(""),$("#aktif").val(""),$("#target").val("_self"),$("#submenu").val("N"),$("#id").val(""),$(".get_value").prop("checked",!1),gload("hide")},error:function(a,e,l){gload("hide"),alert(l)}}),!1}$("#save").prop("disabled",!0),$("#submit-form").validate({rules:{link:{required:!0}},submitHandler:function(){var e=$("#label").val(),l=$("#aktif").val(),s=$("#parentc").val();if($("#eclass").val(),""==e)notif("Nama menu harus diisi","warning"),$("#label").focus();else{if(""!=l)return""==s?(a(),!0):""==e?(notif("CLASS ICON harus di isi","warning"),$("#eclass").focus(),!1):(a(),!0);notif("Aktif harus dipilih","warning"),$("#aktif").focus()}}}),$(".dd").on("change",(function(){$("#save").prop("disabled",""==this.value)})),$("#save").click((function(){var a={type:$("#type").val(),data:$("#nestable-output").val()};$.ajax({type:"GET",url:base_url+"main/crud",data:a,cache:!1,beforeSend:function(){gload("show")},success:function(a){gload("hide"),$("#save").prop("disabled",!0),$("#showicon").removeClass(eclass),$("#showicon").addClass("fa-bars"),$(".hide-txt").hide("slow"),$("#accordionSidebar").load(location.href+" #accordionSidebar"),notif("Data di update","success")},error:function(a,e,l){gload("hide")}})})),$(document).on("click",".edit-button",(function(){var a=$(this).attr("id");$(".get_value").prop("checked",!1),$.ajax({type:"GET",url:base_url+"main/crud",dataType:"json",data:{id:a,type:"get"},cache:!1,beforeSend:function(){gload("show")},success:function(a){if(a.level.split(",").length>1)var e=a.level.split(",");else e=[a.level];e.forEach((function(a,e){$("#idlevel"+a).prop("checked",!0)})),$("#submits").html("Update"),$("#showicon").addClass(a.eclass),$("#showicon").removeClass("fa-bars"),$("#id").val(a.id),$("#label").val(a.label).focus(),$("#link").val(a.link),$("#eclass").val(a.eclass),$("#parentc").val(a.parentc),$("#aktif").val(a.aktif),$("#target").val(a.target),$("#submenu").val(a.submenu),""!=$("#parentc").val()?$(".hide-txt").show("slow"):$(".hide-txt").hide("slow"),gload("hide")},error:function(a,e,l){gload("hide")}})})),$(document).on("click","#reset",(function(){$(".get_value").prop("checked",!1);var a=$("#eclass").val();$("#label").val(""),$("#link").val(""),$("#eclass").val(""),$("#parentc").val(""),$("#showicon").removeClass(a),$("#showicon").addClass("fa-bars"),$("#aktif").val(""),$("#target").val("_self"),$("#submenu").val("N"),$("#id").val(""),$(".hide-txt").hide("slow")}))})),$("#myModalDel").on("show",(function(){$(this).data("id"),$(this).find(".danger")})),$(".confirm-delete").on("click",(function(a){a.preventDefault();var e=$(this).data("id");$("#myModalDel").data("id",e).modal("show")})),$(document).on("click","#btnYes",(function(){var a=$("#myModalDel").data("id");$.ajax({type:"GET",url:base_url+"main/crud",data:{type:"hapus",id:a},cache:!1,dataType:"json",beforeSend:function(){gload("show")},success:function(e){"ok"==e[0]?(notif("Data di hapus","info"),$("li[data-id='"+a+"']").remove()):notif("Data gagal di hapus","danger"),$("#myModalDel").modal("hide"),gload("hide")},error:function(a,e,l){gload("hide")}})}));