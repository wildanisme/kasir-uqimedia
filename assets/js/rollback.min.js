function cek_data(a){$.ajax({url:base_url+"rollback/cek_data_"+a,method:"POST",dataType:"json",beforeSend:function(){$("body").loading()},success:function(t){$("body").loading("stop"),200==t.status&&t.counter>=1?(class_install("install_"+a),$("#install_"+a).addClass("confirm_reset").removeClass("confirm_install"),$("#data-"+a).text(t.counter)):$("#data-"+a).text(t.counter)},error:function(a,t,e){$("body").loading("stop"),sweet("Peringatan!!!",e,"warning","warning")}})}function fullreset_data(a){$("#"+a).removeClass("confirm_reset").addClass("confirm_install"),$("#"+a+" > .card").removeClass("bg-secondary text-white"),$("#"+a+" > .card > .card-body > .row > .col > .text-uppercase").text("Install sample"),$("#"+a+" > .card > .card-body > .row > .col > .text-gray-800").addClass("text-gray-800"),$("#"+a+" > .card > .card-body > .row > .col > .text-muted").addClass("text-muted"),$("#"+a+" > .card > .card-body > .row > .col > .mt-2 > .text-white").removeClass("text-white").addClass("text-success"),$("#"+a+" > .card > .card-body > .row > .col-auto > .fa-database").addClass("text-primary")}function class_install(a){$("#"+a+" > .card").addClass("bg-secondary text-white"),$("#"+a+" > .card > .card-body > .row > .col > .text-uppercase").text("reset sample"),$("#"+a+" > .card > .card-body > .row > .col > .text-gray-800").removeClass("text-gray-800"),$("#"+a+" > .card > .card-body > .row > .col > .text-muted").removeClass("text-muted"),$("#"+a+" > .card > .card-body > .row > .col > .mt-2 > .text-success").removeClass("text-success").addClass("text-white"),$("#"+a+" > .card > .card-body > .row > .col-auto > .text-primary").removeClass("text-primary")}function class_reset(a,t){t=t||"Install sample",$("#"+a).removeClass("confirm_reset").addClass("confirm_install"),$("#"+a+" > .card").removeClass("bg-secondary text-white"),$("#"+a+" > .card > .card-body > .row > .col > .text-uppercase").text(t),$("#"+a+" > .card > .card-body > .row > .col > .text-gray-800").addClass("text-gray-800"),$("#"+a+" > .card > .card-body > .row > .col > .text-muted").addClass("text-muted"),$("#"+a+" > .card > .card-body > .row > .col > .mt-2 > .text-white").removeClass("text-white").addClass("text-success"),$("#"+a+" > .card > .card-body > .row > .col-auto > .fa-database").addClass("text-primary")}$(document).on("click",".full_reset",(function(a){a.preventDefault(),$("#confirm-fullreset").modal("show")})),$(document).on("click",".confirm_install",(function(a){a.preventDefault(),$("#confirm-install").modal("show"),$("#install-data").val($(this).attr("data-name")),$(".title-install").text($(this).attr("data-name")),$("#Label_Install").html("Confirm Install "+$(this).attr("data-name"))})),$(document).on("click",".confirm_update",(function(a){a.preventDefault(),$("#confirm-update").modal("show"),$("#update-database").val($(this).attr("data-name")),$(".title-install").text($(this).attr("data-name")),$("#Label_Update").html("Confirm Update "+$(this).attr("data-name"))})),$(document).on("click",".confirm_reset",(function(a){a.preventDefault(),$("#confirm-reset").modal("show"),$("#reset-data").val($(this).attr("data-name")),$(".title-reset").text($(this).attr("data-name")),$("#Label_Reset").html("Confirm Reset "+$(this).attr("data-name"))})),$(document).on("click",".install_dummy",(function(a){a.preventDefault();var t=$("#install-data").val();$.ajax({url:base_url+"rollback/install_dummy",method:"POST",data:{name:t},dataType:"json",beforeSend:function(){$("body").loading({zIndex:1060})},success:function(a){$("#confirm-install").modal("hide"),$("body").loading("stop"),200==a.status&&a.counter>=1?(class_install(a.tipe),$("#"+a.tipe).addClass("confirm_reset"),$("#"+a.tipe).removeClass("confirm_install"),$("#data-"+a.name).text(a.counter)):$("#data-"+a.name).text(a.counter)},error:function(a,t,e){$("body").loading("stop"),401==JSON.parse(a.responseText).status?swalredir(base_url,e):sweet("Peringatan!!!",e,"warning","warning")}})})),$(document).on("click",".install_database",(function(a){a.preventDefault();var t=$("#update-database").val();$.ajax({url:base_url+"rollback/update_database",method:"POST",data:{name:t},dataType:"json",beforeSend:function(){$("body").loading({zIndex:1060})},success:function(a){$("#confirm-update").modal("hide"),$("body").loading("stop"),1==a.status&&$("#bg_update").removeClass("bg-danger").addClass("bg-success")},error:function(a,t,e){$("body").loading("stop"),401==JSON.parse(a.responseText).status?swalredir(base_url,e):sweet("Peringatan!!!",e,"warning","warning")}})})),$(document).on("click",".reset_dummy",(function(a){a.preventDefault();var t=$("#reset-data").val();$.ajax({url:base_url+"rollback/reset_dummy",method:"POST",data:{name:t},dataType:"json",beforeSend:function(){$("body").loading({zIndex:1060})},success:function(a){$("#confirm-reset").modal("hide"),$("body").loading("stop"),200==a.status&&a.counter>=1||class_reset(a.tipe,a.title),$("#data-"+a.name).text(a.counter)},error:function(a,t,e){$("body").loading("stop"),401==JSON.parse(a.responseText).status?swalredir(base_url,e):sweet("Peringatan!!!",e,"warning","warning")}})})),$(document).on("click",".reset_ulang",(function(a){a.preventDefault();$("#reset-data").val();$.ajax({url:base_url+"rollback/reset_ulang",method:"POST",dataType:"json",beforeSend:function(){$("body").loading({zIndex:1060})},success:function(a){$("#confirm-fullreset").modal("hide"),$("body").loading("stop"),cek_data("kategori"),fullreset_data("install_kategori"),cek_data("bahan"),fullreset_data("install_bahan"),cek_data("satuan"),fullreset_data("install_satuan"),cek_data("produk"),fullreset_data("install_produk"),cek_data("pengeluaran"),fullreset_data("install_pengeluaran"),cek_data("konsumen"),fullreset_data("install_konsumen"),cek_data("supplier"),fullreset_data("install_supplier"),cek_data("pengaturan"),fullreset_data("install_pembelian"),fullreset_data("install_penjualan"),fullreset_data("install_pengeluaran"),fullreset_data("install_jurnal"),fullreset_data("install_kasbon"),fullreset_data("install_pengaturan"),class_reset(a.tipe)},error:function(a,t,e){$("body").loading("stop"),401==JSON.parse(a.responseText).status?swalredir(base_url,e):sweet("Peringatan!!!",e,"warning","warning")}})}));